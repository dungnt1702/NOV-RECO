{% extends 'base.html' %}
{% load static %}

{% block title %}Check-in Thành Công - NOV-RECO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/checkin_success.css' %}">
{% endblock %}

{% block content %}
  <div class="success-container">
    <div class="success-icon">🎉</div>
    <h1 class="success-title">Check-in Thành Công!</h1>
    <p class="success-subtitle">Bạn đã check-in thành công với các thông tin bên dưới</p>
    
    <div class="checkin-info">
      <div class="info-item">
        <span class="info-label">👤 Họ tên</span>
        <span class="info-value" id="user-name">Đang tải...</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">📧 Email</span>
        <span class="info-value" id="user-email">Đang tải...</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">🏢 Phòng ban</span>
        <span class="info-value" id="user-department">Đang tải...</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">🆔 Mã nhân viên</span>
        <span class="info-value" id="user-employee-id">Đang tải...</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">📍 Vị trí</span>
        <span class="info-value" id="location-name">Đang tải...</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">🗺️ Tọa độ</span>
        <span class="info-value">
          <span class="coordinates" id="coordinates">Đang tải...</span>
        </span>
      </div>
      
      <div class="info-item">
        <span class="info-label">📅 Thời gian</span>
        <span class="info-value" id="checkin-time">Đang tải...</span>
      </div>
      
      <div class="info-item" id="note-item" style="display: none;">
        <span class="info-label">📝 Ghi chú</span>
        <span class="info-value" id="note-text">-</span>
      </div>
    </div>
    
    <div id="photo-container" style="display: none;">
      <img id="photo-preview" class="photo-preview" alt="Ảnh check-in">
    </div>
    
    <div class="actions">
      <a href="/checkin/action/" class="btn btn-primary">📝 Check-in Mới</a>
      <a href="/" class="btn btn-secondary">🏠 Trang chủ</a>
      <a href="/checkin/quick/" class="btn btn-accent">⚡ Check-in Lại</a>
      <a href="javascript:window.print()" class="btn btn-outline">🖨️ In</a>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
// Pass checkin data to JavaScript securely via template context
window.checkinSuccessData = {
  userName: "{{ success_data.user_name|escapejs }}",
  userEmail: "{{ success_data.user_email|escapejs }}",
  userDepartment: "{{ success_data.user_department|escapejs }}",
  userEmployeeId: "{{ success_data.user_employee_id|escapejs }}",
  locationName: "{{ success_data.area_name|escapejs }}",
  coordinates: "{{ success_data.coordinates|escapejs }}",
  checkinTime: "{{ success_data.checkin_time|escapejs }}",
  note: "{{ success_data.note|escapejs }}",
  photoUrl: "{{ success_data.photo_url|escapejs }}"
};
</script>
<script src="{% static 'js/checkin_success.js' %}"></script>
{% endblock %}