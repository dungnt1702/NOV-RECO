{% extends 'base.html' %}
{% load static %}

{% block title %}Check-in Nhanh - NOV-RECO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/quick_checkin.css' %}">
{% endblock %}

{% block content %}
  <div class="quick-checkin-container">
    <div class="header">
      <h1>⚡ Check-in Nhanh</h1>
      <p>Sử dụng dữ liệu từ lần check-in trước</p>
    </div>

    <div id="alert-container"></div>

    <div class="quick-info">
      <div class="info-title">
        📋 Thông tin từ lần check-in trước
      </div>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">📍 Vị trí</div>
          <div class="info-value" id="last-location">Đang tải...</div>
        </div>
        <div class="info-item">
          <div class="info-label">🗺️ Tọa độ</div>
          <div class="info-value">
            <span class="coordinates" id="last-coordinates">Đang tải...</span>
          </div>
        </div>
        <div class="info-item">
          <div class="info-label">📅 Thời gian cuối</div>
          <div class="info-value" id="last-time">Đang tải...</div>
        </div>
        <div class="info-item">
          <div class="info-label">📝 Ghi chú cuối</div>
          <div class="info-value" id="last-note">Đang tải...</div>
        </div>
      </div>
    </div>

    <form id="quick-checkin-form">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="note">📝 Ghi chú (tùy chọn)</label>
        <textarea id="note" name="note" placeholder="Nhập ghi chú cho lần check-in này..."></textarea>
      </div>

      <div class="loading" id="loading">
        <p>🔄 Đang xử lý check-in...</p>
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary" id="submit-btn">
          ⚡ Check-in Ngay
        </button>
        <a href="{% url 'checkin_page' %}" class="btn btn-secondary">📝 Check-in Mới</a>
        <a href="{% url 'user_history' %}" class="btn btn-secondary">📋 Lịch sử</a>
      </div>
    </form>
  </div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/quick_checkin.js' %}"></script>
{% endblock %}
