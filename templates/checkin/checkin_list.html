{% extends 'base.html' %}
{% load static %}
{% csrf_token %}

{% block title %}Danh sách Check-in - NOV-RECO{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
  <div class="dashboard-page">
    {% csrf_token %}
    <div class="dashboard-container">
      <div class="dashboard-header">
        <h1>Danh sách Check-in</h1>
        <p class="dashboard-subtitle">Xem tất cả check-in trong hệ thống</p>
      </div>

      <!-- Search and Filter -->
      <div class="search-filter-section">
        <form class="search-form">
          <div class="search-input-group">
            <input type="text" id="search-input" placeholder="Tìm kiếm theo tên, khu vực, ghi chú..." class="form-control search-input">
            <select id="page-size-select" class="form-control page-size-select">
              <option value="10">10/trang</option>
              <option value="20" selected>20/trang</option>
              <option value="50">50/trang</option>
              <option value="100">100/trang</option>
            </select>
            <button type="button" onclick="clearFilters()" class="btn btn-secondary">
              <i class="fas fa-times"></i>
              Xóa bộ lọc
            </button>
          </div>
        </form>
      </div>

    <div class="dashboard-content">
      <!-- Filters -->
      <div class="filters">
        <div class="filter-group">
          <label class="filter-label">Tìm kiếm</label>
          <input type="text" id="search-input" class="filter-input" placeholder="Tìm theo tên, email...">
        </div>
        <div class="filter-group">
          <label class="filter-label">Từ ngày</label>
          <input type="date" id="date-from" class="filter-input">
        </div>
        <div class="filter-group">
          <label class="filter-label">Đến ngày</label>
          <input type="date" id="date-to" class="filter-input">
        </div>
        <div class="filter-group">
          <label class="filter-label">Người dùng</label>
          <select id="user-filter" class="filter-input">
            <option value="">Tất cả người dùng</option>
          </select>
        </div>
      </div>

      <!-- Check-in List -->
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Người dùng</th>
              <th>Địa điểm</th>
              <th>Tọa độ</th>
              <th>Khoảng cách</th>
              <th>Thời gian</th>
              <th>Ghi chú</th>
              <th>Ảnh</th>
            </tr>
          </thead>
          <tbody id="checkins-table">
            <!-- Check-ins will be loaded here via JavaScript -->
          </tbody>
        </table>
      </div>

      <!-- Mobile Cards -->
      <div class="mobile-cards" id="mobile-cards">
        <!-- Mobile cards will be loaded here via JavaScript -->
      </div>

      <!-- Pagination Component -->
      {% include 'components/pagination.html' %}

      <!-- Actions -->
      <div class="actions">
        <button onclick="loadCheckins()" class="action-button">
          <i class="fas fa-refresh"></i>
          Tải lại
        </button>
        <button onclick="exportData()" class="action-button success">
          <i class="fas fa-download"></i>
          Xuất dữ liệu
        </button>
        <a href="{% url 'user_history' %}" class="action-button secondary">
          <i class="fas fa-history"></i>
          Lịch sử cá nhân
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/checkin_list.js' %}"></script>
{% endblock %}